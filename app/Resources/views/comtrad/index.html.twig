{% extends 'base.html.twig' %}

{% block page_title %}
   Commodities Trading
{% endblock %} 

{% block page_description %}
Accounts
{% endblock %} 

{% block stylesheets_extra %} 
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <link href="{{ asset('/metronic/global/plugins/datatables/datatables.min.css') }}" rel="stylesheet" type="text/css" />
        <link href="{{ asset('/metronic/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css') }}" rel="stylesheet" type="text/css" />
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN THEME GLOBAL STYLES -->
        <link href="{{ asset('/metronic/global/css/components.min.css') }}" rel="stylesheet" id="style_components" type="text/css" />
        <link href="{{ asset('/metronic/global/css/plugins.min.css') }}" rel="stylesheet" type="text/css" />
        <!-- END THEME GLOBAL STYLES -->
        
        <link href="{{ asset('/css/colorbox.css') }}" rel="stylesheet" type="text/css" />        
{% endblock %}

{% block body %}

<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->

        <!-- BEGIN CONTAINER -->
        <div class="page-container">
            <!-- BEGIN CONTENT -->
                    <div class="row">
                        <div class="col-md-6">
                            <a class="btn btn-success" href="{{ path('comtrad_new') }}" ><span>Add</span></a>
                            <br><br>                            
                            <!-- BEGIN EXAMPLE TABLE PORTLET-->
                            <div class="portlet light bordered">
                                <div class="portlet-title">
                                    <div class="caption font-green">
                                        <i class="icon-settings font-green"></i>
                                        <span class="caption-subject bold uppercase">List</span>
                                    </div>
                                    <div class="tools"> </div>
                                </div>
                                <div class="portlet-body">
                                    <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="sample_2">
                                        <thead>
                                            <tr>
                                                <th class="all" width="10%">Detail</th>
                                                <th class="all">Description</th>
                                                <th class="all">Type</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        {% for Comtrad in comtrads %}
                                            <tr>
                                                <td>
                                                    <center>
                                                        <a href="#" class="a_show" param="{{ Comtrad.id }}" param2="{{ app.request.attributes.get('_controller') }}">
                                                            <i class="fa fa-search fa-x"></i>
                                                        </a>       
                                                    </center>
                                                </td>
                                                <td>{{ Comtrad.description }}</td>
                                                <td>{{ Comtrad.idTypeComtrad }}</td>
                                            </tr>
                                        {% endfor %} 
                                        </tbody>                                        
                                    </table>
                                </div>
                            </div>
                            <!-- END EXAMPLE TABLE PORTLET-->
                        </div>
                        <div class="col-md-6" id="show">
                           
                        </div>     
                    </div>
                    <!-- BEGIN LOG AND TASK -->                                                            
                    <div class="row" id="admin_box" style="display: none">
                        <!-- BEGIN LOGS -->   
                        <div class="col-md-6 col-sm-6">
                            <div class="portlet light bordered">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-share font-blue"></i>
                                        <span class="caption-subject font-blue bold uppercase">Recent Activities</span>
                                    </div>
                                    <div class="actions">
                                        <div class="btn-group">
                                            <a class="btn btn-sm blue btn-outline btn-circle" href="javascript:;" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> Filter By
                                                <i class="fa fa-angle-down"></i>
                                            </a>
                                            <div class="dropdown-menu hold-on-click dropdown-checkboxes pull-right">
                                                <label>
                                                    <input class="option_log" type="radio" name="tipo" param="All"/> All</label>
                                                <label>
                                                    <input class="option_log" type="radio" name="tipo" param="Insert"/> Created</label>
                                                <label>
                                                    <input class="option_log" type="radio" name="tipo" param="Update"/> Updated</label>
                                                <label>
                                                    <input class="option_log" type="radio" name="tipo" param="Delete"/> Deleted</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <div class="scroller" style="height: 300px;" data-always-visible="1" data-rail-visible="0">
                                        <ul class="feeds" id="log_box">

                                        </ul>
                                    </div>
                                    <div class="scroller-footer">
                                        <div class="btn-arrow-link pull-right">
                                            <a href="{{ path('logactivity_index') }}" >See All Records</a>
                                            <i class="icon-arrow-right"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- END LOGS -->
                        <!-- BEGIN TASK -->
                        <div class="col-md-6 col-sm-6">
                            <div class="portlet light tasks-widget bordered">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-share font-green-haze hide"></i>
                                        <span class="caption-subject font-green bold uppercase">Tasks</span>
                                        <span class="caption-helper">tasks summary...</span>
                                    </div>
                                    <div class="actions">
                                        <div class="btn-group">
                                                <a class="btn btn-sm blue btn-outline btn-circle" href="javascript:;" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"> Filter By
                                                    <i class="fa fa-angle-down"></i>
                                                </a>
                                                <div class="dropdown-menu hold-on-click dropdown-checkboxes pull-right">
                                                    <label>
                                                        <input class="option_task" type="radio" name="tipo" param="All" param2="comtrad"/> All</label>
                                                    <label>
                                                        <input class="option_task" type="radio" name="tipo" param="true" param2="comtrad"/> Completed</label>
                                                    <label>
                                                        <input class="option_task" type="radio" name="tipo" param="false" param2="comtrad"/> Pending</label>
                                                   <label>
                                                        <input class="option_task" type="radio" name="tipo" param="overdue" param2="comtrad"/> Overdue</label>     
                                                </div>
                                        </div>
                                        <a class="btn btn-circle btn-icon-only btn-default fullscreen" href="javascript:;" data-original-title="" title=""> </a>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <div class="task-content">
                                        <div class="scroller" style="height: 312px;" data-always-visible="1" data-rail-visible1="1">
                                            <!-- START TASK LIST -->
                                            <ul class="task-list" id="task_box">

                                            </ul>
                                            <!-- END START TASK LIST -->
                                        </div>
                                    </div>
                                    <div class="task-footer">
                                        <div class="btn-arrow-link pull-right">
                                            <a href="{{ path('todo_index') }}" >See All Records</a>
                                            <i class="icon-arrow-right"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- END LOGS -->
                    </div>
                    <!-- END LOG AND TASK -->                    
                                        
            <!-- END CONTENT BODY -->
            
        </div>                                       
        <!-- END CONTAINER -->
     
{% endblock %}

{% block javascripts_extra %} 
       <!--[if lt IE 9]>
<script src="{{ asset('/metronic/global/plugins/respond.min.js') }}"></script>
<script src="{{ asset('/metronic/global/plugins/excanvas.min.js') }}"></script> 
<![endif]-->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="{{ asset('/metronic/global/scripts/datatable.js') }}" type="text/javascript"></script>
        <script src="{{ asset('/metronic/global/plugins/datatables/datatables.min.js') }}" type="text/javascript"></script>
        <script src="{{ asset('/metronic/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js') }}" type="text/javascript"></script>
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <script src="{{ asset('/metronic/pages/scripts/table-datatables-responsive.min.js') }}" type="text/javascript"></script>
        <!-- END PAGE LEVEL SCRIPTS -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="{{ asset('/metronic/global/plugins/bootstrap-confirmation/bootstrap-confirmation.min.js') }}" type="text/javascript"></script>
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <script src="{{ asset('/metronic/pages/scripts/ui-confirmations.min.js') }}" type="text/javascript"></script>
        
        <script src="{{ asset('/js/jquery.colorbox.js') }}" type="text/javascript"></script>
        <!-- END PAGE LEVEL SCRIPTS -->

 <script>    
    $( document ).ready(function() {
        
        // Click al cambiar la página
        $('.btn-sm').on('click', function() {
            show();
        });
        
        $('.pagination-panel-input').on('keyup', function() {
            show();
        }); 
        
        // Carga inicial
        show();
        
        function show() {
            $('.a_show').on('click', function() {
                 id = $(this).attr('param');
                 form_name = $(this).attr('param2');
                 temp = form_name.split("\Controller");
                 temp = temp[1].replace(/\\/g, '');

                 $.ajax({
                     url: "{{ path('show_ajax') }}",
                     data: "form_name=" + temp +
                     "&id=" + id,
                     success: function(data){
                         $('#show').empty();
                         $('#show').html(data);
                         $('#agregar').html('<button class="btn green-sharp btn-large" data-toggle="confirmation" data-original-title="Are you sure ?" title="">Default configuration</button>');

                         $(document).find('[data-toggle="confirmation"]').confirmation();
                     }
                 });
             });        
        }
        
})
 </script>
<script>
        $(document).ready(function(){
                //Examples of how to assign the Colorbox event to elements
                $(".colorbox").colorbox({rel:'colorbox', width:"75%", height:"75%"});
        });
</script>
<script>    
        // LOG BOX
        $( document ).ready(function() {
            
                    // BOX LOG
                    $.ajax({
                        url: "{{ path('log_box') }}",
                        success: function(data){
                            var obj = JSON.stringify(data);
                            var json = $.parseJSON(obj); 
                            var show = json[0]['show'];

                            if (show) {
                                $('#admin_box').css('display','inline');
                                $('#log_box').empty();
                                $('#log_box').html(json[0]['all']);
                            } 
                            
                        }
                    }); 
                    
                    $( ".option_log" ).change(function() {
                        type = $(this).attr('param');
                        $.ajax({
                            url: "{{ path('log_box') }}",
                            data: "type=" + type,
                            success: function(data){
                                var obj = JSON.stringify(data);
                                var json = $.parseJSON(obj); 
                                var show = json[0]['show'];

                                if (show) {
                                    $('#admin_box').css('display','inline');
                                    $('#log_box').empty();
                                    $('#log_box').html(json[0]['all']);
                                } 

                            }
                        });
                    });    
                    // END BOX LOG
                    
                    
                    // BOX TASK
                    $.ajax({
                        url: "{{ path('todo_history') }}",
                        data: "pagina=" + 'comtrad',
                        success: function(data){
                            var obj = JSON.stringify(data);
                            var json = $.parseJSON(obj); 
                            var show = json[0]['show'];

                            if (show) {
                                $('#admin_box').css('display','inline');
                                $('#task_box').empty();
                                $('#task_box').html(json[0]['all']);
                            } 
                            checkbox();                            
                        }
                    });                    
                    
                    $( ".option_task" ).change(function() {
                        type = $(this).attr('param');
                        pagina = $(this).attr('param2');
                        $.ajax({
                            url: "{{ path('todo_history') }}",
                            data: "type=" + type +
                                  "&pagina=" + pagina,
                            success: function(data){
                                var obj = JSON.stringify(data);
                                var json = $.parseJSON(obj); 
                                var show = json[0]['show'];

                                if (show) {
                                    $('#admin_box').css('display','inline');
                                    $('#task_box').empty();
                                    $('#task_box').html(json[0]['all']);
                                }
                                
                                checkbox();
                            }
                        });
                    }); 
                                        
                    
                    // END BOX TASK
                    
            function checkbox() {
                $('input.checkbox_task').on('click', function() {
                    type = $(this).attr('param');
                    pagina = $(this).attr('param2');
                    id = $(this).attr('param3');
                    $.ajax({
                        url: "{{ path('todo_history') }}",
                        data: "type=" + type +
                              "&pagina=" + pagina +
                              "&id=" + id,
                        success: function(data){
                            var obj = JSON.stringify(data);
                            var json = $.parseJSON(obj); 
                            var show = json[0]['show'];

                            if (show) {
                                $('#admin_box').css('display','inline');
                                $('#task_box').empty();
                                $('#task_box').html(json[0]['all']);
                            }  

                        }
                    });
                });                
            }    
                    
        });              
</script>  
{% endblock %}